var L=Object.defineProperty;var k=(t,e,s)=>e in t?L(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var h=(t,e,s)=>(k(t,typeof e!="symbol"?e+"":e,s),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function c(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();function D(t,e,s){console.log("CreateEl");const c=document.createElement(e);return c.classList.add(s),t.append(c),c}class l{static get textarea(){const e=document.querySelector(".keyboard__text");if(!e||!(e instanceof HTMLTextAreaElement))throw new Error("textarea is not found");return e}static get wrapper(){const e=document.querySelector(".keyboard__body");if(!e||!(e instanceof HTMLElement))throw new Error("");return e}static createKeyboardSection(){const e=D(document.body,"div","app"),s=D(e,"section","keyboard");s.innerHTML=`
      <h1 class="keyboard__title">Виртуальная клавиатура</h1>
      <textarea class="keyboard__text" rows="7" cols="50" autofocus></textarea>
      <div class="keyboard__body"></div>
      <div class="keyboard__additional-inf">
        <p>Клавиатура создана в операционной системе MacOS</p>
        <p>Для переключения языка: левыe <span class="key_inf">shift</span> + <span class="key_inf">control</span></p>
      </div>
    `}}var n=(t=>(t.Backquote="Backquote",t.Digit1="Digit1",t.Digit2="Digit2",t.Digit3="Digit3",t.Digit4="Digit4",t.Digit5="Digit5",t.Digit6="Digit6",t.Digit7="Digit7",t.Digit8="Digit8",t.Digit9="Digit9",t.Digit0="Digit0",t.Minus="Minus",t.Equal="Equal",t.KeyQ="KeyQ",t.KeyW="KeyW",t.KeyE="KeyE",t.KeyR="KeyR",t.KeyT="KeyT",t.KeyY="KeyY",t.KeyU="KeyU",t.KeyI="KeyI",t.KeyO="KeyO",t.KeyP="KeyP",t.BracketLeft="BracketLeft",t.BracketRight="BracketRight",t.Backslash="Backslash",t.KeyA="KeyA",t.KeyS="KeyS",t.KeyD="KeyD",t.KeyF="KeyF",t.KeyG="KeyG",t.KeyH="KeyH",t.KeyJ="KeyJ",t.KeyK="KeyK",t.KeyL="KeyL",t.Semicolon="Semicolon",t.Quote="Quote",t.KeyZ="KeyZ",t.KeyX="KeyX",t.KeyC="KeyC",t.KeyV="KeyV",t.KeyB="KeyB",t.KeyN="KeyN",t.KeyM="KeyM",t.Comma="Comma",t.Period="Period",t.Slash="Slash",t))(n||{}),o=(t=>(t.Backspace="Backspace",t.Tab="Tab",t.Delete="Delete",t.Enter="Enter",t.CapsLock="CapsLock",t.ShiftRight="ShiftRight",t.MetaRight="MetaRight",t.Space="Space",t.MetaLeft="MetaLeft",t.AltLeft="AltLeft",t.ControlLeft="ControlLeft",t.ArrowUp="ArrowUp",t.ShiftLeft="ShiftLeft",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.ArrowLeft="ArrowLeft",t.AltRight="AltRight",t))(o||{}),w=(t=>(t.caseDown="caseDown",t.shift="shift",t.option="option",t))(w||{});const d={Backquote:{en:{caseDown:"`",shift:"~",option:"`"},ru:{caseDown:"ё",shift:"~",option:"`"}},Digit1:{en:{caseDown:"1",shift:"!",option:"¡"},ru:{caseDown:"1",shift:"!",option:"!"}},Digit2:{en:{caseDown:"2",shift:"@",option:"™"},ru:{caseDown:"2",shift:'"',option:"@"}},Digit3:{en:{caseDown:"3",shift:"#",option:"£"},ru:{caseDown:"3",shift:"№",option:"#"}},Digit4:{en:{caseDown:"4",shift:"$",option:"¢"},ru:{caseDown:"4",shift:";",option:"$"}},Digit5:{en:{caseDown:"5",shift:"%",option:"∞"},ru:{caseDown:"5",shift:"%",option:"©"}},Digit6:{en:{caseDown:"6",shift:"^",option:"§"},ru:{caseDown:"6",shift:":",option:"^"}},Digit7:{en:{caseDown:"7",shift:"&",option:"¶"},ru:{caseDown:"7",shift:"?",option:"&"}},Digit8:{en:{caseDown:"8",shift:"*",option:"•"},ru:{caseDown:"8",shift:"*",option:"₽"}},Digit9:{en:{caseDown:"9",shift:"(",option:"ª"},ru:{caseDown:"9",shift:"(",option:"("}},Digit0:{en:{caseDown:"0",shift:")",option:"º"},ru:{caseDown:"0",shift:")",option:")"}},Minus:{en:{caseDown:"-",shift:"_",option:"–"},ru:{caseDown:"-",shift:"_",option:"–"}},Equal:{en:{caseDown:"=",shift:"+",option:"≠"},ru:{caseDown:"=",shift:"+",option:"≠"}},Backspace:{en:{caseDown:"",shift:"",option:""},ru:{caseDown:"",shift:"",option:""}},Delete:{en:{caseDown:"",shift:"",option:""},ru:{caseDown:"",shift:"",option:""}},Tab:{en:{caseDown:"	",shift:"	",option:"	"},ru:{caseDown:"	",shift:"	",option:"	"}},KeyQ:{en:{caseDown:"q",shift:"Q",option:"œ"},ru:{caseDown:"й",shift:"Й",option:"ј"}},KeyW:{en:{caseDown:"w",shift:"W",option:"џ"},ru:{caseDown:"ц",shift:"Ц",option:"џ"}},KeyE:{en:{caseDown:"e",shift:"E",option:"´"},ru:{caseDown:"у",shift:"У",option:"ў"}},KeyR:{en:{caseDown:"r",shift:"R",option:"®"},ru:{caseDown:"к",shift:"К",option:"ќ"}},KeyT:{en:{caseDown:"t",shift:"T",option:"†"},ru:{caseDown:"е",shift:"Е",option:"†"}},KeyY:{en:{caseDown:"y",shift:"Y",option:"¥"},ru:{caseDown:"н",shift:"Н",option:"њ"}},KeyU:{en:{caseDown:"u",shift:"U",option:"¨"},ru:{caseDown:"г",shift:"Г",option:"ѓ"}},KeyI:{en:{caseDown:"i",shift:"I",option:"ˆ"},ru:{caseDown:"ш",shift:"Ш",option:"ѕ"}},KeyO:{en:{caseDown:"o",shift:"O",option:"ø"},ru:{caseDown:"щ",shift:"Щ",option:"'"}},KeyP:{en:{caseDown:"p",shift:"P",option:"π"},ru:{caseDown:"з",shift:"З",option:"‘"}},BracketLeft:{en:{caseDown:"[",shift:"{",option:"“"},ru:{caseDown:"х",shift:"Х",option:"“"}},BracketRight:{en:{caseDown:"]",shift:"}",option:"‘"},ru:{caseDown:"ъ",shift:"Ъ",option:"«"}},Backslash:{en:{caseDown:"\\",shift:"|",option:"«"},ru:{caseDown:"\\",shift:"/",option:"|"}},CapsLock:{en:{caseDown:"",shift:"",option:""},ru:{caseDown:"",shift:"",option:""}},KeyA:{en:{caseDown:"a",shift:"A",option:"å"},ru:{caseDown:"ф",shift:"Ф",option:"d"}},KeyS:{en:{caseDown:"s",shift:"S",option:"ß"},ru:{caseDown:"ы",shift:"Ы",option:"z"}},KeyD:{en:{caseDown:"d",shift:"D",option:"∂"},ru:{caseDown:"в",shift:"В",option:"ћ"}},KeyF:{en:{caseDown:"f",shift:"F",option:"ƒ"},ru:{caseDown:"а",shift:"А",option:"÷"}},KeyG:{en:{caseDown:"g",shift:"G",option:"©"},ru:{caseDown:"п",shift:"П",option:"…"}},KeyH:{en:{caseDown:"h",shift:"H",option:"˙"},ru:{caseDown:"р",shift:"Р",option:"•"}},KeyJ:{en:{caseDown:"j",shift:"J",option:"∆"},ru:{caseDown:"о",shift:"О",option:"∆"}},KeyK:{en:{caseDown:"k",shift:"K",option:"˚"},ru:{caseDown:"л",shift:"Л",option:"љ"}},KeyL:{en:{caseDown:"l",shift:"L",option:"¬"},ru:{caseDown:"д",shift:"Д",option:"l"}},Semicolon:{en:{caseDown:";",shift:":",option:"…"},ru:{caseDown:"ж",shift:"Ж",option:"«"}},Quote:{en:{caseDown:"'",shift:'"',option:"æ"},ru:{caseDown:"э",shift:"Э",option:"є"}},Enter:{en:{caseDown:`
`,shift:`
`,option:`
`},ru:{caseDown:`
`,shift:`
`,option:`
`}},ShiftLeft:{en:{caseDown:"",shift:"",option:""},ru:{caseDown:"",shift:"",option:""}},KeyZ:{en:{caseDown:"z",shift:"Z",option:"Ω"},ru:{caseDown:"я",shift:"Я",option:"ђ"}},KeyX:{en:{caseDown:"x",shift:"X",option:"≈"},ru:{caseDown:"ч",shift:"Ч",option:"x"}},KeyC:{en:{caseDown:"c",shift:"C",option:"ç"},ru:{caseDown:"с",shift:"С",option:"c"}},KeyV:{en:{caseDown:"v",shift:"V",option:"√"},ru:{caseDown:"м",shift:"М",option:"v"}},KeyB:{en:{caseDown:"b",shift:"B",option:"∫"},ru:{caseDown:"и",shift:"И",option:"і"}},KeyN:{en:{caseDown:"n",shift:"N",option:"˜"},ru:{caseDown:"т",shift:"Т",option:"ƒ"}},KeyM:{en:{caseDown:"m",shift:"M",option:"µ"},ru:{caseDown:"ь",shift:"Ь",option:"m"}},Comma:{en:{caseDown:",",shift:"<",option:"≤"},ru:{caseDown:"б",shift:"Б",option:"≤"}},Period:{en:{caseDown:".",shift:">",option:"≥"},ru:{caseDown:"ю",shift:"Ю",option:"≥"}},Slash:{en:{caseDown:"/",shift:"?",option:"÷"},ru:{caseDown:".",shift:",",option:"ї"}},ArrowUp:{en:{caseDown:"",shift:"",option:""},ru:{caseDown:"",shift:"",option:""}},ShiftRight:{en:{caseDown:"",shift:"",option:""},ru:{caseDown:"",shift:"",option:""}},ControlLeft:{en:{caseDown:"",shift:"",option:""},ru:{caseDown:"",shift:"",option:""}},AltLeft:{en:{caseDown:"",shift:"",option:""},ru:{caseDown:"",shift:"",option:""}},MetaLeft:{en:{caseDown:"",shift:"",option:""},ru:{caseDown:"",shift:"",option:""}},Space:{en:{caseDown:" ",shift:" ",option:" "},ru:{caseDown:" ",shift:" ",option:" "}},MetaRight:{en:{caseDown:"",shift:"",option:""},ru:{caseDown:"",shift:"",option:""}},AltRight:{en:{caseDown:"",shift:"",option:""},ru:{caseDown:"",shift:"",option:""}},ArrowLeft:{en:{caseDown:"",shift:"",option:""},ru:{caseDown:"",shift:"",option:""}},ArrowDown:{en:{caseDown:"",shift:"",option:""},ru:{caseDown:"",shift:"",option:""}},ArrowRight:{en:{caseDown:"",shift:"",option:""},ru:{caseDown:"",shift:"",option:""}}},K=[[n.Backquote,n.Digit1,n.Digit2,n.Digit3,n.Digit4,n.Digit5,n.Digit6,n.Digit7,n.Digit8,n.Digit9,n.Digit0,n.Minus,n.Equal,o.Backspace],[o.Tab,n.KeyQ,n.KeyW,n.KeyE,n.KeyR,n.KeyT,n.KeyY,n.KeyU,n.KeyI,n.KeyO,n.KeyP,n.BracketLeft,n.BracketRight,n.Backslash,o.Delete],[o.CapsLock,n.KeyA,n.KeyS,n.KeyD,n.KeyF,n.KeyG,n.KeyH,n.KeyJ,n.KeyK,n.KeyL,n.Semicolon,n.Quote,o.Enter],[o.ShiftLeft,n.KeyZ,n.KeyX,n.KeyC,n.KeyV,n.KeyB,n.KeyN,n.KeyM,n.Comma,n.Period,n.Slash,o.ArrowUp,o.ShiftRight],[o.ControlLeft,o.AltLeft,o.MetaLeft,o.Space,o.AltRight,o.ArrowLeft,o.ArrowDown,o.ArrowRight,o.MetaRight]];function g(t,e){const s="lang";switch(t){case"get":let c=localStorage.getItem(s);return!c||c===void 0||!(c==="en"||c==="ru")?(g("save","en"),"en"):c;case"save":if(e===void 0||!(e==="en"||e==="ru"))throw new Error("indalid data");return localStorage.setItem(s,e),e;default:throw new Error("invalid type")}}class v{constructor(e,s,c,i){h(this,"name");h(this,"el");h(this,"value");this.name=e,this.value=d[this.name][s][c],this.el=this.createView(i)}changeValue(e,s){this.value=d[this.name][e][s],this.updateContent()}changeCase(e){e==="upper"?this.value=this.value.toUpperCase():e==="lower"&&(this.value=this.value.toLowerCase()),this.updateContent()}createView(e){if(!e)throw new Error("parent is not found");const s=document.createElement("button");return s.className=`key ${this.name}`,s.name=this.name,e.append(s),s.textContent=this.value,s}updateContent(){this.el.textContent=this.value}controlActive(e){switch(e){case"active":this.el.classList.contains("active")||this.el.classList.add("active");break;case"unactive":this.el.classList.contains("active")&&this.el.classList.remove("active");break}}}class x{constructor(){h(this,"keys");h(this,"box");h(this,"textarea");h(this,"lang");h(this,"letterType");h(this,"isCapsLock");h(this,"pressedKeys");this.keys=new Map,this.box=l.wrapper,this.textarea=l.textarea,this.lang=g("get"),this.letterType=w.caseDown,this.isCapsLock=!1,this.pressedKeys=[]}createView(){K.forEach(e=>{const s=D(this.box,"div","keys__row");e.forEach(c=>{const i=new v(c,this.lang,this.letterType,s);this.keys.set(c,i)})}),this.initeMousedown(),this.initeMouseUp(),this.initKeydown(),this.initeKeyup(),this.initClick()}changeKeyboardLayout(){this.keys.forEach(e=>e.changeValue(this.lang,this.letterType))}changeCase(e){this.keys.forEach(s=>s.changeCase(e))}initeMousedown(){this.box.addEventListener("mousedown",e=>{const{target:s}=e;if(!s||!(s instanceof HTMLButtonElement))return;switch(s.name){case o.ShiftLeft:this.activeEvent("mousedown",o.ShiftLeft);break;case o.AltLeft:this.activeEvent("mousedown",o.AltLeft);break}})}initeMouseUp(){this.box.addEventListener("mouseup",e=>{const{target:s}=e;if(!s||!(s instanceof HTMLButtonElement))return;switch(s.name){case o.ShiftLeft:this.activeEvent("mouseup",o.ShiftLeft);break;case o.AltLeft:this.activeEvent("mouseup",o.AltLeft);break}})}initKeydown(){document.addEventListener("keydown",e=>{const{code:s,shiftKey:c}=e,i=this.keys.get(o.ShiftLeft);i!==void 0&&(c?i.controlActive("active"):i.controlActive("unactive"));const a=this.keys.has(s)?this.keys.get(s):null;if(a){switch(a.controlActive("active"),s){case o.ShiftLeft:this.activeEvent("keydown",o.ShiftLeft);break;case o.AltLeft:this.activeEvent("keydown",o.AltLeft);break}if(!e.repeat)switch(s){case o.ShiftLeft:case o.ControlLeft:this.pressedKeys.push(s);break;case o.CapsLock:e.getModifierState(o.CapsLock)&&(a.el.classList.add("on"),this.changeCase("upper")),this.isCapsLock=e.getModifierState(o.CapsLock);break;default:if(Object.keys(n).includes(s)){e.preventDefault();const r=a.value;this.textarea.focus();const u=this.textarea.selectionStart,f=this.textarea.selectionEnd;this.textarea.setRangeText(r,u,f,"end")}break}}})}changeLang(){this.lang=this.lang==="en"?this.lang="ru":"en",g("save",this.lang),this.changeKeyboardLayout()}initeKeyup(){document.addEventListener("keyup",e=>{const{code:s}=e,c=this.keys.has(s)?this.keys.get(s):null;if(!c)return;switch(c.controlActive("unactive"),s){case o.ShiftLeft:this.activeEvent("keyup",o.ShiftLeft);break;case o.AltLeft:this.activeEvent("keyup",o.AltLeft);break;case o.CapsLock:e.getModifierState(o.CapsLock)||(c.el.classList.remove("on"),this.changeCase("lower")),this.isCapsLock=e.getModifierState(o.CapsLock);break}if(this.pressedKeys.length===0)return;let i=!0;[o.ShiftLeft,o.ControlLeft].forEach(a=>{if(!this.pressedKeys.includes(a)){i=!1;return}}),i&&this.changeLang(),this.pressedKeys=[]})}initClick(){this.box.addEventListener("mouseup",e=>{const{target:s}=e;if(!s||!(s instanceof HTMLButtonElement))return;const c=s.name,i=this.textarea.selectionStart,a=this.textarea.selectionEnd;let r=0,u=Number(this.textarea.getAttribute("cols")??0);const{value:f}=this.textarea;switch(this.textarea.focus(),c){case o.Backspace:if(i===a&&i===+f){const p=i===0?0:i-1;this.textarea.setRangeText("",p,a,"end")}else if(i===a&&i!==+f){const p=i===0?0:i-1;this.textarea.setRangeText("",p,a,"end")}else this.textarea.setRangeText("",i,a,"end");break;case o.Delete:if(!(i===a&&i===+f))if(i===a&&i!==+f){const p=i;this.textarea.setRangeText("",p,p+1,"end")}else this.textarea.setRangeText("",i,a,"end");break;case o.Tab:e.preventDefault(),this.textarea.setRangeText("	",i,a,"end");break;case o.CapsLock:s.classList.contains("on")?(s.classList.remove("on"),s.classList.remove("active"),this.isCapsLock=!1,this.changeCase("lower")):(s.classList.add("on"),this.isCapsLock=!0,this.changeCase("upper"));break;case o.AltLeft:this.textarea.selectionStart!==0&&(r=this.textarea.selectionStart-1),this.textarea.setSelectionRange(r,r);break;case o.ArrowRight:this.textarea.selectionStart===this.textarea.value.length?r=this.textarea.value.length:r=this.textarea.selectionStart+1,this.textarea.setSelectionRange(r,r);break;case o.ArrowUp:this.textarea.selectionStart>u?r=this.textarea.selectionStart-u-1:r=this.textarea.selectionStart,this.textarea.setSelectionRange(r,r);break;case o.ArrowDown:r=this.textarea.selectionStart+u+1,this.textarea.setSelectionRange(r,r);break;default:const y=s.textContent??"";this.textarea.setRangeText(y,i,a,"end");break}})}activeEvent(e,s){(e==="mousedown"||e==="mouseup")&&this.textarea.focus(),s===o.ShiftLeft&&((e==="mousedown"||e==="keydown")&&this.changeCase(this.isCapsLock?"lower":"upper"),(e==="mouseup"||e==="keyup")&&this.changeCase(this.isCapsLock?"upper":"lower")),s===o.AltLeft&&((e==="mousedown"||e==="keydown")&&(this.letterType=w.option),(e==="mouseup"||e==="keyup")&&(this.letterType=w.caseDown),this.changeKeyboardLayout())}}l.createKeyboardSection();const C=new x;C.createView();
